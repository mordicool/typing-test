{"version":3,"sources":["StopWatch.js","logo.svg","App.js","config.js","index.js"],"names":["formatTime","number","toString","padStart","formatFullTime","ms","seconds","minutes","StopWatch","React","forwardRef","ref","className","useState","setMs","setSeconds","setMinutes","timerIdRef","useRef","startTimer","useCallback","current","setInterval","stopTimer","clearInterval","undefined","resetTimer","getTime","fullTime","useEffect","useImperativeHandle","App","typingTest","setTypingTest","loading","setLoading","currentTyping","setCurrentTyping","isTestComplete","setIsTestComplete","isModalOpen","setIsModalOpen","highscoreName","setHighscoreName","top5Highscores","setTop5Highscores","stopwatchRef","getRandomTypingTest","fetch","process","then","response","json","resetState","onTypingChange","e","newTyping","target","value","text","startsWith","onNextTestButtonClick","getCurrentTimerTime","submitHighscore","a","time","id","method","headers","body","JSON","stringify","name","data","result","length","alert","gravity","recycle","src","logo","alt","spellCheck","disabled","autoFocus","onChange","onClick","isOpen","onRequestClose","ariaHideApp","map","highscore","index","type","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a49c33fd.chunk.js","sourcesContent":["import React, {\r\n\tuseImperativeHandle,\r\n\tuseEffect,\r\n\tuseRef,\r\n\tuseState,\r\n\tuseCallback,\r\n} from 'react';\r\n\r\nconst formatTime = (number) => number.toString().padStart(2, '0');\r\nconst formatFullTime = (ms, seconds, minutes) =>\r\n\t`${formatTime(minutes)}:${formatTime(seconds)}:${formatTime(ms)}`;\r\n\r\nconst StopWatch = React.forwardRef(({ className }, ref) => {\r\n\tconst [ms, setMs] = useState(0);\r\n\tconst [seconds, setSeconds] = useState(0);\r\n\tconst [minutes, setMinutes] = useState(0);\r\n\tconst timerIdRef = useRef();\r\n\r\n\tconst startTimer = useCallback(() => {\r\n\t\ttimerIdRef.current = setInterval(() => {\r\n\t\t\tif (ms + 1 < 100) return void setMs((ms) => ms + 1);\r\n\r\n\t\t\tsetMs(0);\r\n\t\t\tif (seconds + 1 < 60) return void setSeconds((seconds) => seconds + 1);\r\n\r\n\t\t\tsetSeconds(0);\r\n\t\t\tsetMinutes((minutes) => minutes + 1);\r\n\t\t}, 10);\r\n\t}, [ms, seconds]);\r\n\r\n\tconst stopTimer = useCallback(() => {\r\n\t\tif (!timerIdRef.current) return;\r\n\t\tclearInterval(timerIdRef.current);\r\n\t\ttimerIdRef.current = undefined;\r\n\t}, []);\r\n\r\n\tconst resetTimer = useCallback(() => {\r\n\t\tstopTimer();\r\n\t\tsetMs(0);\r\n\t\tsetSeconds(0);\r\n\t\tsetMinutes(0);\r\n\t}, [stopTimer]);\r\n\r\n\tconst getTime = useCallback(\r\n\t\t() => ({\r\n\t\t\tms,\r\n\t\t\tseconds,\r\n\t\t\tminutes,\r\n\t\t\tfullTime: formatFullTime(ms, seconds, minutes),\r\n\t\t}),\r\n\t\t[ms, seconds, minutes]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (timerIdRef.current) return;\r\n\t\tstartTimer();\r\n\r\n\t\treturn () => {\r\n\t\t\tstopTimer();\r\n\t\t};\r\n\t}, [startTimer, stopTimer]);\r\n\r\n\tuseImperativeHandle(\r\n\t\tref,\r\n\t\t() => ({\r\n\t\t\tstartTimer,\r\n\t\t\tstopTimer,\r\n\t\t\tresetTimer,\r\n\t\t\tgetTime,\r\n\t\t}),\r\n\t\t[startTimer, stopTimer, resetTimer, getTime]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div className={className}>{formatFullTime(ms, seconds, minutes)}</div>\r\n\t);\r\n});\r\n\r\nexport default StopWatch;\r\n","export default __webpack_public_path__ + \"static/media/logo.6350d902.svg\";","import { useRef, useState, useEffect, useCallback } from 'react';\nimport PuffLoader from 'react-spinners/PuffLoader';\nimport {\n\tGET_TOP_HIGHSCORES_URL,\n\tGET_TYPING_TEST_URL,\n\tSUBMIT_HIGHSCORE_URL,\n} from './config';\nimport Confetti from 'react-confetti';\nimport StopWatch from './StopWatch';\nimport Modal from 'react-modal';\nimport logo from './logo.svg';\nimport 'animate.css';\nimport './App.css';\n\nfunction App() {\n\tconst [typingTest, setTypingTest] = useState();\n\tconst [loading, setLoading] = useState(true);\n\tconst [currentTyping, setCurrentTyping] = useState('');\n\tconst [isTestComplete, setIsTestComplete] = useState(false);\n\tconst [isModalOpen, setIsModalOpen] = useState(false);\n\tconst [highscoreName, setHighscoreName] = useState('');\n\tconst [top5Highscores, setTop5Highscores] = useState(null);\n\tconst stopwatchRef = useRef();\n\n\tconst getRandomTypingTest = useCallback(() => {\n\t\tsetLoading(true);\n\t\tfetch(GET_TYPING_TEST_URL)\n\t\t\t.then((response) => response.json())\n\t\t\t.then((typingTest) => {\n\t\t\t\tsetTypingTest(typingTest);\n\t\t\t\tsetLoading(false);\n\t\t\t});\n\t}, []);\n\n\tconst resetState = useCallback(() => {\n\t\tsetTypingTest();\n\t\tsetCurrentTyping('');\n\t\tsetIsTestComplete(false);\n\t}, []);\n\n\tuseEffect(() => void getRandomTypingTest(), [getRandomTypingTest]);\n\n\tuseEffect(() => {\n\t\tif (isTestComplete) stopwatchRef.current?.stopTimer();\n\t\telse stopwatchRef.current?.startTimer();\n\t}, [isTestComplete]);\n\n\tconst onTypingChange = useCallback(\n\t\t(e) => {\n\t\t\tconst newTyping = e.target.value;\n\t\t\tif (!typingTest.text.startsWith(newTyping)) return;\n\t\t\tif (typingTest.text === newTyping) setIsTestComplete(true);\n\t\t\tsetCurrentTyping(newTyping);\n\t\t},\n\t\t[typingTest]\n\t);\n\n\tconst onNextTestButtonClick = useCallback(() => {\n\t\tgetRandomTypingTest();\n\t\tresetState();\n\t\tsetTop5Highscores(null);\n\t}, [resetState, getRandomTypingTest]);\n\n\tconst getCurrentTimerTime = useCallback(() => {\n\t\tconst { ms, seconds, minutes } = stopwatchRef.current?.getTime();\n\t\treturn ms * 10 + seconds * 1000 + minutes * 1000 * 60;\n\t}, []);\n\n\tconst submitHighscore = useCallback(async () => {\n\t\tconst time = getCurrentTimerTime();\n\t\tconst result = await fetch(`${SUBMIT_HIGHSCORE_URL}/${typingTest.id}`, {\n\t\t\tmethod: 'POST',\n\t\t\theaders: { 'Content-Type': 'application/json' },\n\t\t\tjson: true,\n\t\t\tbody: JSON.stringify({ name: highscoreName, time }),\n\t\t})\n\t\t\t.then((response) => response.json())\n\t\t\t.then((data) => data.result);\n\n\t\tif (result === 'Success') {\n\t\t\tconst top5Highscores = await fetch(\n\t\t\t\t`${GET_TOP_HIGHSCORES_URL}/${typingTest.id}/5`\n\t\t\t).then((response) => response.json());\n\t\t\tsetTop5Highscores(top5Highscores);\n\t\t}\n\t\t// TODO Fixup this code and consider adding loading\n\t\t// setIsModalOpen(false);\n\t\tsetHighscoreName('');\n\t}, [getCurrentTimerTime, highscoreName, typingTest]);\n\n\tuseEffect(() => {\n\t\tif (!top5Highscores) return;\n\n\t\tconst time = getCurrentTimerTime();\n\t\tif (time < top5Highscores[top5Highscores.length - 1].time)\n\t\t\talert('New Record!!');\n\t}, [getCurrentTimerTime, top5Highscores]);\n\n\treturn (\n\t\t<div className=\"container\">\n\t\t\t{isTestComplete && <Confetti gravity={2} recycle={false} />}\n\t\t\t<div className=\"header\">\n\t\t\t\tWelcome!\n\t\t\t\t<img className=\"logo\" src={logo} alt=\"logo\" />\n\t\t\t</div>\n\t\t\t<div className={`main ${isTestComplete ? 'complete' : ''}`}>\n\t\t\t\t<div className=\"loader-container\">\n\t\t\t\t\t<PuffLoader loading={loading} />\n\t\t\t\t</div>\n\t\t\t\t{!loading && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<div className=\"title-row\">\n\t\t\t\t\t\t\t<div className=\"title\">{typingTest.name}</div>\n\t\t\t\t\t\t\t<StopWatch className=\"stop-watch\" ref={stopwatchRef} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"typing-container\">\n\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\tclassName=\"typing-aria placeholder\"\n\t\t\t\t\t\t\t\tspellCheck=\"false\"\n\t\t\t\t\t\t\t\tvalue={typingTest.text}\n\t\t\t\t\t\t\t\tdisabled\n\t\t\t\t\t\t\t></textarea>\n\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\tclassName=\"typing-aria\"\n\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\tspellCheck=\"false\"\n\t\t\t\t\t\t\t\tdisabled={isTestComplete}\n\t\t\t\t\t\t\t\tvalue={currentTyping}\n\t\t\t\t\t\t\t\tonChange={onTypingChange}\n\t\t\t\t\t\t\t></textarea>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<div className=\"actions-section\">\n\t\t\t\t{isTestComplete && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"action-button next-test-button\"\n\t\t\t\t\t\t\tonClick={onNextTestButtonClick}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tNext\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"action-button submit-highscore\"\n\t\t\t\t\t\t\tonClick={() => setIsModalOpen(true)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSubmit Highscore\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<Modal\n\t\t\t\tisOpen={isModalOpen}\n\t\t\t\tonRequestClose={() => setIsModalOpen(false)}\n\t\t\t\tclassName=\"modal\"\n\t\t\t\tariaHideApp={false}\n\t\t\t>\n\t\t\t\t<div className=\"modal-content-wrapper\">\n\t\t\t\t\t{top5Highscores ? (\n\t\t\t\t\t\t<table className=\"table\">\n\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th>Rank</th>\n\t\t\t\t\t\t\t\t\t<th>Name</th>\n\t\t\t\t\t\t\t\t\t<th>Typing Score</th>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t{top5Highscores.map((highscore, index) => (\n\t\t\t\t\t\t\t\t\t<tr key={highscore.name}>\n\t\t\t\t\t\t\t\t\t\t<td>{index + 1}</td>\n\t\t\t\t\t\t\t\t\t\t<td>{highscore.name}</td>\n\t\t\t\t\t\t\t\t\t\t<td>{highscore.time}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div className=\"center-vertical\">\n\t\t\t\t\t\t\t<label>Please enter your name:</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\tspellCheck=\"false\"\n\t\t\t\t\t\t\t\tvalue={highscoreName}\n\t\t\t\t\t\t\t\tonChange={(e) => setHighscoreName(e.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div className=\"time\">\n\t\t\t\t\t\t\t\t<b>Time:</b>\n\t\t\t\t\t\t\t\t<span>{stopwatchRef.current?.getTime().fullTime}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"action-button second\"\n\t\t\t\t\t\t\t\tonClick={submitHighscore}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</Modal>\n\t\t</div>\n\t);\n}\n\nexport default App;\n","export const GET_TYPING_TEST_URL = process.env.REACT_APP_GET_TYPING_TEST_URL;\r\nexport const SUBMIT_HIGHSCORE_URL = process.env.REACT_APP_SUBMIT_HIGHSCORE_URL;\r\nexport const GET_TOP_HIGHSCORES_URL = process.env.REACT_APP_GET_TOP_HIGHSCORES_URL;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n"],"sourceRoot":""}