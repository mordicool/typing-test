{"version":3,"sources":["logo.svg","StopWatch.js","App.js","index.js"],"names":["formatTime","number","toString","padStart","formatFullTime","ms","seconds","minutes","StopWatch","React","forwardRef","ref","className","useState","setMs","setSeconds","setMinutes","timerIdRef","useRef","startTimer","useCallback","current","setInterval","stopTimer","clearInterval","undefined","resetTimer","getTime","fullTime","useEffect","useImperativeHandle","SERVER_URL","App","typingTest","setTypingTest","loading","setLoading","currentTyping","setCurrentTyping","isTestComplete","setIsTestComplete","isModalOpen","setIsModalOpen","highscoreName","setHighscoreName","top5Highscores","setTop5Highscores","stopwatchRef","getRandomTypingTest","fetch","then","response","json","resetState","onTypingChange","e","newTyping","target","value","text","startsWith","onNextTestButtonClick","getCurrentTimerTime","submitHighscore","a","time","id","method","headers","body","JSON","stringify","name","data","result","length","alert","gravity","recycle","src","logo","alt","spellCheck","disabled","autoFocus","onChange","onClick","isOpen","onRequestClose","ariaHideApp","map","highscore","index","type","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c8821d9e.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6350d902.svg\";","import React, {\r\n\tuseImperativeHandle,\r\n\tuseEffect,\r\n\tuseRef,\r\n\tuseState,\r\n\tuseCallback,\r\n} from 'react';\r\n\r\nconst formatTime = (number) => number.toString().padStart(2, '0');\r\nconst formatFullTime = (ms, seconds, minutes) =>\r\n\t`${formatTime(minutes)}:${formatTime(seconds)}:${formatTime(ms)}`;\r\n\r\nconst StopWatch = React.forwardRef(({ className }, ref) => {\r\n\tconst [ms, setMs] = useState(0);\r\n\tconst [seconds, setSeconds] = useState(0);\r\n\tconst [minutes, setMinutes] = useState(0);\r\n\tconst timerIdRef = useRef();\r\n\r\n\tconst startTimer = useCallback(() => {\r\n\t\ttimerIdRef.current = setInterval(() => {\r\n\t\t\tif (ms + 1 < 100) return void setMs((ms) => ms + 1);\r\n\r\n\t\t\tsetMs(0);\r\n\t\t\tif (seconds + 1 < 60) return void setSeconds((seconds) => seconds + 1);\r\n\r\n\t\t\tsetSeconds(0);\r\n\t\t\tsetMinutes((minutes) => minutes + 1);\r\n\t\t}, 10);\r\n\t}, [ms, seconds]);\r\n\r\n\tconst stopTimer = useCallback(() => {\r\n\t\tif (!timerIdRef.current) return;\r\n\t\tclearInterval(timerIdRef.current);\r\n\t\ttimerIdRef.current = undefined;\r\n\t}, []);\r\n\r\n\tconst resetTimer = useCallback(() => {\r\n\t\tstopTimer();\r\n\t\tsetMs(0);\r\n\t\tsetSeconds(0);\r\n\t\tsetMinutes(0);\r\n\t}, [stopTimer]);\r\n\r\n\tconst getTime = useCallback(\r\n\t\t() => ({\r\n\t\t\tms,\r\n\t\t\tseconds,\r\n\t\t\tminutes,\r\n\t\t\tfullTime: formatFullTime(ms, seconds, minutes),\r\n\t\t}),\r\n\t\t[ms, seconds, minutes]\r\n\t);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (timerIdRef.current) return;\r\n\t\tstartTimer();\r\n\r\n\t\treturn () => {\r\n\t\t\tstopTimer();\r\n\t\t};\r\n\t}, [startTimer, stopTimer]);\r\n\r\n\tuseImperativeHandle(\r\n\t\tref,\r\n\t\t() => ({\r\n\t\t\tstartTimer,\r\n\t\t\tstopTimer,\r\n\t\t\tresetTimer,\r\n\t\t\tgetTime,\r\n\t\t}),\r\n\t\t[startTimer, stopTimer, resetTimer, getTime]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div className={className}>{formatFullTime(ms, seconds, minutes)}</div>\r\n\t);\r\n});\r\n\r\nexport default StopWatch;\r\n","import { useRef, useState, useEffect, useCallback } from 'react';\nimport './App.css';\nimport logo from './logo.svg';\nimport PuffLoader from 'react-spinners/PuffLoader';\nimport Confetti from 'react-confetti';\nimport StopWatch from './StopWatch';\nimport Modal from 'react-modal';\nimport 'animate.css';\n\nconst SERVER_URL = 'http://localhost:5000';\n\nfunction App() {\n\tconst [typingTest, setTypingTest] = useState();\n\tconst [loading, setLoading] = useState(true);\n\tconst [currentTyping, setCurrentTyping] = useState('');\n\tconst [isTestComplete, setIsTestComplete] = useState(false);\n\tconst [isModalOpen, setIsModalOpen] = useState(false);\n\tconst [highscoreName, setHighscoreName] = useState('');\n\tconst [top5Highscores, setTop5Highscores] = useState(null);\n\tconst stopwatchRef = useRef();\n\n\tconst getRandomTypingTest = useCallback(() => {\n\t\tsetLoading(true);\n\t\tfetch(SERVER_URL + '/typing')\n\t\t\t.then((response) => response.json())\n\t\t\t.then((typingTest) => {\n\t\t\t\tsetTypingTest(typingTest);\n\t\t\t\tsetLoading(false);\n\t\t\t});\n\t}, []);\n\n\tconst resetState = useCallback(() => {\n\t\tsetTypingTest();\n\t\tsetCurrentTyping('');\n\t\tsetIsTestComplete(false);\n\t}, []);\n\n\tuseEffect(() => void getRandomTypingTest(), [getRandomTypingTest]);\n\n\tuseEffect(() => {\n\t\tif (isTestComplete) stopwatchRef.current?.stopTimer();\n\t\telse stopwatchRef.current?.startTimer();\n\t}, [isTestComplete]);\n\n\tconst onTypingChange = useCallback(\n\t\t(e) => {\n\t\t\tconst newTyping = e.target.value;\n\t\t\tif (!typingTest.text.startsWith(newTyping)) return;\n\t\t\tif (typingTest.text === newTyping) setIsTestComplete(true);\n\t\t\tsetCurrentTyping(newTyping);\n\t\t},\n\t\t[typingTest]\n\t);\n\n\tconst onNextTestButtonClick = useCallback(() => {\n\t\tgetRandomTypingTest();\n\t\tresetState();\n\t\tsetTop5Highscores(null);\n\t}, [resetState, getRandomTypingTest]);\n\n\tconst getCurrentTimerTime = useCallback(() => {\n\t\tconst { ms, seconds, minutes } = stopwatchRef.current?.getTime();\n\t\treturn ms * 10 + seconds * 1000 + minutes * 1000 * 60;\n\t}, []);\n\n\tconst submitHighscore = useCallback(async () => {\n\t\tconst time = getCurrentTimerTime();\n\t\tconst result = await fetch(\n\t\t\t`${SERVER_URL}/submit_highscore/${typingTest.id}`,\n\t\t\t{\n\t\t\t\tmethod: 'POST',\n\t\t\t\theaders: { 'Content-Type': 'application/json' },\n\t\t\t\tjson: true,\n\t\t\t\tbody: JSON.stringify({ name: highscoreName, time }),\n\t\t\t}\n\t\t)\n\t\t\t.then((response) => response.json())\n\t\t\t.then((data) => data.result);\n\n\t\tif (result === 'Success') {\n\t\t\tconst top5Highscores = await fetch(\n\t\t\t\t`${SERVER_URL}/highscores/${typingTest.id}/5`\n\t\t\t).then((response) => response.json());\n\t\t\tsetTop5Highscores(top5Highscores);\n\t\t}\n\t\t// TODO Fixup this code and consider adding loading\n\t\t// setIsModalOpen(false);\n\t\tsetHighscoreName('');\n\t}, [getCurrentTimerTime, highscoreName, typingTest]);\n\n\tuseEffect(() => {\n\t\tif (!top5Highscores) return;\n\n\t\tconst time = getCurrentTimerTime();\n\t\tif (time < top5Highscores[top5Highscores.length - 1].time)\n\t\t\talert('New Record!!');\n\t}, [getCurrentTimerTime, top5Highscores]);\n\n\treturn (\n\t\t<div className=\"container\">\n\t\t\t{isTestComplete && <Confetti gravity={2} recycle={false} />}\n\t\t\t<div className=\"header\">\n\t\t\t\tWelcome!\n\t\t\t\t<img className=\"logo\" src={logo} alt=\"logo\" />\n\t\t\t</div>\n\t\t\t<div className={`main ${isTestComplete ? 'complete' : ''}`}>\n\t\t\t\t<div className=\"loader-container\">\n\t\t\t\t\t<PuffLoader loading={loading} />\n\t\t\t\t</div>\n\t\t\t\t{!loading && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<div className=\"title-row\">\n\t\t\t\t\t\t\t<div className=\"title\">{typingTest.name}</div>\n\t\t\t\t\t\t\t<StopWatch className=\"stop-watch\" ref={stopwatchRef} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"typing-container\">\n\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\tclassName=\"typing-aria placeholder\"\n\t\t\t\t\t\t\t\tspellCheck=\"false\"\n\t\t\t\t\t\t\t\tvalue={typingTest.text}\n\t\t\t\t\t\t\t\tdisabled\n\t\t\t\t\t\t\t></textarea>\n\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\tclassName=\"typing-aria\"\n\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\tspellCheck=\"false\"\n\t\t\t\t\t\t\t\tdisabled={isTestComplete}\n\t\t\t\t\t\t\t\tvalue={currentTyping}\n\t\t\t\t\t\t\t\tonChange={onTypingChange}\n\t\t\t\t\t\t\t></textarea>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<div className=\"actions-section\">\n\t\t\t\t{isTestComplete && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"action-button next-test-button\"\n\t\t\t\t\t\t\tonClick={onNextTestButtonClick}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tNext\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"action-button submit-highscore\"\n\t\t\t\t\t\t\tonClick={() => setIsModalOpen(true)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSubmit Highscore\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<Modal\n\t\t\t\tisOpen={isModalOpen}\n\t\t\t\tonRequestClose={() => setIsModalOpen(false)}\n\t\t\t\tclassName=\"modal\"\n\t\t\t\tariaHideApp={false}\n\t\t\t>\n\t\t\t\t<div className=\"modal-content-wrapper\">\n\t\t\t\t\t{top5Highscores ? (\n\t\t\t\t\t\t<table className=\"table\">\n\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th>Rank</th>\n\t\t\t\t\t\t\t\t\t<th>Name</th>\n\t\t\t\t\t\t\t\t\t<th>Typing Score</th>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t{top5Highscores.map((highscore, index) => (\n\t\t\t\t\t\t\t\t\t<tr key={highscore.name}>\n\t\t\t\t\t\t\t\t\t\t<td>{index + 1}</td>\n\t\t\t\t\t\t\t\t\t\t<td>{highscore.name}</td>\n\t\t\t\t\t\t\t\t\t\t<td>{highscore.time}</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div className=\"center-vertical\">\n\t\t\t\t\t\t\t<label>Please enter your name:</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\tspellCheck=\"false\"\n\t\t\t\t\t\t\t\tvalue={highscoreName}\n\t\t\t\t\t\t\t\tonChange={(e) => setHighscoreName(e.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div className=\"time\">\n\t\t\t\t\t\t\t\t<b>Time:</b>\n\t\t\t\t\t\t\t\t<span>{stopwatchRef.current?.getTime().fullTime}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"action-button second\"\n\t\t\t\t\t\t\t\tonClick={submitHighscore}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</Modal>\n\t\t</div>\n\t);\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n"],"sourceRoot":""}